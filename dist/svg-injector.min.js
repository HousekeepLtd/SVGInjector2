/**
 * SVGInjector v1.1.3-RC - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(e,t){"use strict";function n(e){e=e.split(" ");for(var t={},n=e.length,r=[];n--;)t.hasOwnProperty(e[n])||(t[e[n]]=1,r.unshift(e[n]));return r.join(" ")}function r(e){return!!(e&&e.constructor&&e.call&&e.apply)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e,t){var r=e.getAttribute("class");r=r?r:"",i(t)&&(t=t.join(" ")),t=r+" "+t,e.setAttribute("class",n(t))}function l(e,t,n){var r="undefined"==typeof n?w:n.slice(0);N.call(r,function(e,n){r[n]=e.replace("%s",t)}),s(e,r)}function a(e,t,r){r="undefined"==typeof r?w.slice(0):r.slice(0);var i=e.getAttribute("class");i&&(N.call(r,function(e,n){e=e.replace("%s",t),i.indexOf(e)>=0&&(i=i.replace(e,""))}),e.setAttribute("class",n(i)))}var o,u,c,f,p,d,v,g="http://www.w3.org/2000/svg",h="http://www.w3.org/1999/xlink",y="sprite",b=y+"--",m=y,A=b,w=[A+"%s",m],S="icon",x="file:"===e.location.protocol,C=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),N=Array.prototype.forEach||function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;var n,r=this.length>>>0;for(n=0;r>n;++n)n in this&&e.call(t,this[n],n,this)},j={},E=0,T=[],G=[],V={},k=function(e,t,n){var r;"undefined"==typeof n&&(n=["id","viewBox"]);for(var i=0;i<e.attributes.length;i++)r=e.attributes.item(i),n.indexOf(r.name)<0&&t.setAttribute(r.name,r.value)},O=function(e){var n=t.createElementNS(g,"svg");return N.call(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),k(e,n),n},M=function(e,t,n){var r=n.getAttribute("data-src").split("#");if(r.length>1){var i=r[1],s=new RegExp("\\."+i+" ","g"),l=i+"-"+t;e.textContent=e.textContent.replace(s,"."+l+" "),n.setAttribute("class",n.getAttribute("class")+" "+l)}},q=function(e){var t=e.getAttribute("class");return t?t.split(" "):[]},B=function(e){var t=q(e);N.call(t,function(e){return e.indexOf(A)>=0?e.replace(A,""):void 0})},R=function(e,t){var n,r,i,s,l,a,u=!1,c=null;if(void 0===t)return e.cloneNode(!0);if(n=e.getElementById(t)){if(s=n.getAttribute("viewBox"),i=s.split(" "),n instanceof SVGSymbolElement)r=O(n),u=!0;else if(n instanceof SVGViewElement){if(c=null,o){var f='*[width="'+i[2]+'"][height="'+i[3]+'"]';l={},Math.abs(i[0])>0&&(l.x=i[0],f+='[x="'+i[0]+'"]'),Math.abs(i[1])>0&&(l.y=i[1],f+='[y="'+i[1]+'"]'),c=e.querySelector(f)}if(c&&c instanceof SVGSVGElement){r=c.cloneNode(!0);for(var p in l)"width"!==p&&"height"!==p&&r.removeAttribute(p)}else if(c&&c instanceof SVGUseElement){var d=e.getElementById(c.getAttributeNS(h,"href").substr(1));r=O(d),s=d.getAttribute("viewBox"),i=s.split(" "),u=!0}else u=!0,r=e.cloneNode(!0)}return u&&(r.setAttribute("viewBox",i.join(" ")),r.setAttribute("width",i[2]+"px"),r.setAttribute("height",i[3]+"px")),a=q(r),a.indexOf(t)<0&&(a.push(t),r.setAttribute("class",a.join(" "))),r}},L=function(e,t,n){G[t]=G[t]||[],G[t].push({callback:e,fragmentId:n})},I=function(e){for(var t=0,n=G[e].length;n>t;t++)!function(t){setTimeout(function(){G[e][t].callback(R(j[e],G[e][t].fragmentId))},0)}(t)},P=function(t,n){var r,i,s;if(r=t.split("#"),i=r[0],s=2===r.length?r[1]:void 0,void 0!==j[i])j[i]instanceof SVGSVGElement?n(R(j[i],s)):L(n,i,s);else{if(!e.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;j[i]={},L(n,i,s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(404===l.status||null===l.responseXML)return n("Unable to load SVG file: "+i),x&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===l.status||x&&0===l.status))return n("There was a problem injecting the SVG: "+l.status+" "+l.statusText),!1;if(l.responseXML instanceof Document)j[i]=l.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{var r=new DOMParser;e=r.parseFromString(l.responseText,"text/xml")}catch(s){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+t),!1;j[i]=e.documentElement}I(i)}},l.open("GET",i),l.overrideMimeType&&l.overrideMimeType("text/xml"),l.send()}},F=function(t,o,g,h){var y;y=v===!1?t.getAttribute("data-src")||t.getAttribute("src"):v+"#"+B(t);var b,m=y.split("#");if(!/\.svg/i.test(y))return void h("Attempted to inject a file with a non-svg extension: "+y);if(!C){var A=t.getAttribute("data-fallback")||t.getAttribute("data-png");return void(A?(t.setAttribute("src",A),h(null)):g?(b=m.length>1?m[1]+".png":y.split("/").pop().replace(".svg",".png"),i(f)?l(t,m[1],f):r(f)?f(t,m[1]):"string"==typeof f?s(t,f):t.setAttribute("src",g+"/"+b),h(null)):h("This browser does not support SVG and no PNG fallback was defined."))}i(f)&&a(t,m[1],f),-1===T.indexOf(t)&&(T.push(t),t.setAttribute("src",""),P(y,function(r){if("undefined"==typeof r||"string"==typeof r)return h(r),!1;var i=t.getAttribute("id");i&&r.setAttribute("id",i);var s=t.getAttribute("title");s&&r.setAttribute("title",s);var l=[].concat(r.getAttribute("class")||[],"injected-svg",t.getAttribute("class")||[]).join(" ");r.setAttribute("class",n(l));var a=t.getAttribute("style");a&&r.setAttribute("style",a);var f=[].filter.call(t.attributes,function(e){return/^data-\w[\w\-]*$/.test(e.name)});N.call(f,function(e){e.name&&e.value&&r.setAttribute(e.name,e.value)});var v=t.getAttribute("preserveAspectRatio");v&&r.setAttribute("preserveAspectRatio",v);for(var g,b=r.querySelectorAll("defs clipPath[id]"),m=0,A=b.length;A>m;m++){g=b[m].id+"-"+E;for(var w=r.querySelectorAll('[clip-path*="'+b[m].id+'"]'),S=0,x=w.length;x>S;S++)w[S].setAttribute("clip-path","url(#"+g+")");b[m].id=g}for(var C,j=r.querySelectorAll("defs mask[id]"),G=0,k=j.length;k>G;G++){C=j[G].id+"-"+E;for(var O=r.querySelectorAll('[mask*="'+j[G].id+'"]'),B=0,R=O.length;R>B;B++)O[B].setAttribute("mask","url(#"+C+")");j[G].id=C}r.removeAttribute("xmlns:a");for(var L,I,P=r.querySelectorAll("script"),F=[],U=0,X=P.length;X>U;U++)I=P[U].getAttribute("type"),I&&"application/ecmascript"!==I&&"application/javascript"!==I||(L=P[U].innerText||P[U].textContent,F.push(L),r.removeChild(P[U]));if(F.length>0&&("always"===o||"once"===o&&!V[y])){for(var D=0,H=F.length;H>D;D++)new Function(F[D])(e);V[y]=!0}var $=r.querySelectorAll("style");N.call($,function(e){var t=q(r);(t.indexOf(u)>=0||d)&&t.indexOf(c)<0?e.parentNode.removeChild(e):p?M(e,E,r):e.textContent+=""}),t.parentNode.replaceChild(r,t),delete T[T.indexOf(t)],t=null,E++,h(r)}))},U=function(e,n,r){n=n||{};var i=n.evalScripts||"always",s=n.pngFallback||!1;o=n.onlyInjectVisiblePart||!0,c="undefined"==typeof n.keepStylesClass?"":n.keepStylesClass,m="undefined"==typeof n.spriteClassName?y:n.spriteClassName,A="undefined"==typeof n.spriteClassIdName?b:n.spriteClassIdName,u="undefined"==typeof n.removeStylesClass?S:n.removeStylesClass,d="undefined"==typeof n.removeAllStyles?!1:n.removeAllStyles,f="undefined"==typeof n.fallbackClassName?w:n.fallbackClassName,p="undefined"==typeof n.prefixStyleTags?!0:n.prefixStyleTags,v="undefined"==typeof n.spritesheetURL||""===n.spritesheetURL?!1:n.spritesheetURL,n.forceFallbacks&&(C=!1);var l=n.each,a=t.querySelector("html");if(C){if(a.className.replace("no-svg",""),"undefined"==typeof n.removeStylesClass){var g="svg."+u+" {fill: currentColor;}",h=t.head||t.getElementsByTagName("head")[0],x=t.createElement("style");x.type="text/css",x.styleSheet?x.styleSheet.cssText=g:x.appendChild(t.createTextNode(g)),h.appendChild(x)}}else a.className+=" no-svg";if(void 0!==e.length){var j=0;N.call(e,function(t){F(t,i,s,function(t){l&&"function"==typeof l&&l(t),r&&e.length===++j&&r(j)})})}else e?F(e,i,s,function(t){l&&"function"==typeof l&&l(t),r&&r(1),e=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=U:"function"==typeof define&&define.amd?define(function(){return U}):"object"==typeof e&&(e.SVGInjector=U)}(window,document);
//# sourceMappingURL=svg-injector.map.js