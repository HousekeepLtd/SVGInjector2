/**
 * SVGInjector v1.1.3-RC - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(t,e){"use strict";function n(t){t=t.split(" ");for(var e={},n=t.length,r=[];n--;)e.hasOwnProperty(t[n])||(e[t[n]]=1,r.unshift(t[n]));return r.join(" ")}function r(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t,e){var r=t.getAttribute("class");r=r?r:"",i(e)&&(e=e.join(" ")),e=r+" "+e,t.setAttribute("class",n(e))}function l(t,e,n){var r="undefined"==typeof n?["%s","%s-dims","svg-sprite"]:n.slice(0);v.call(r,function(t,n){r[n]=t.replace("%s",e)}),o(t,r)}var a,s,u,c="http://www.w3.org/2000/svg",f="http://www.w3.org/1999/xlink",p="file:"===t.location.protocol,d=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),v=Array.prototype.forEach||function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var n,r=this.length>>>0;for(n=0;r>n;++n)n in this&&t.call(e,this[n],n,this)},g={},h=0,b=[],m=[],y={},A=function(t,e,n){var r;"undefined"==typeof n&&(n=["id","viewBox"]);for(var i=0;i<t.attributes.length;i++)r=t.attributes.item(i),n.indexOf(r.name)<0&&e.setAttribute(r.name,r.value)},w=function(t){var n=e.createElementNS(c,"svg");return v.call(t.childNodes,function(t){n.appendChild(t.cloneNode(!0))}),A(t,n),n},S=function(t){var e=t.getAttribute("class");return e?e.split(" "):[]},x=function(t,e){var n,r,i,o,l,s,u=!1,c=null;if(void 0===e)return t.cloneNode(!0);if(n=t.getElementById(e)){if(o=n.getAttribute("viewBox"),i=o.split(" "),n instanceof SVGSymbolElement)r=w(n),u=!0;else if(n instanceof SVGViewElement){if(c=null,a){var p='*[width="'+i[2]+'"][height="'+i[3]+'"]';l={},Math.abs(i[0])>0&&(l.x=i[0],p+='[x="'+i[0]+'"]'),Math.abs(i[1])>0&&(l.y=i[1],p+='[y="'+i[1]+'"]'),c=t.querySelector(p)}if(c&&c instanceof SVGSVGElement){r=c.cloneNode(!0);for(var d in l)"width"!==d&&"height"!==d&&r.removeAttribute(d)}else if(c&&c instanceof SVGUseElement){var v=t.getElementById(c.getAttributeNS(f,"href").substr(1));r=w(v),o=v.getAttribute("viewBox"),i=o.split(" "),u=!0}else u=!0,r=t.cloneNode(!0)}return u&&(r.setAttribute("viewBox",i.join(" ")),r.setAttribute("width",i[2]+"px"),r.setAttribute("height",i[3]+"px")),s=S(r),s.indexOf(e)<0&&(s.push(e),r.setAttribute("class",s.join(" "))),r}},j=function(t,e,n){m[e]=m[e]||[],m[e].push({callback:t,fragmentId:n})},G=function(t){for(var e=0,n=m[t].length;n>e;e++)!function(e){setTimeout(function(){m[t][e].callback(x(g[t],m[t][e].fragmentId))},0)}(e)},N=function(e,n){var r,i,o;if(r=e.split("#"),i=r[0],o=2===r.length?r[1]:void 0,void 0!==g[i])g[i]instanceof SVGSVGElement?n(x(g[i],o)):j(n,i,o);else{if(!t.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;g[i]={},j(n,i,o);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(404===l.status||null===l.responseXML)return n("Unable to load SVG file: "+i),p&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===l.status||p&&0===l.status))return n("There was a problem injecting the SVG: "+l.status+" "+l.statusText),!1;if(l.responseXML instanceof Document)g[i]=l.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t;try{var r=new DOMParser;t=r.parseFromString(l.responseText,"text/xml")}catch(o){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+e),!1;g[i]=t.documentElement}G(i)}},l.open("GET",i),l.overrideMimeType&&l.overrideMimeType("text/xml"),l.send()}},V=function(e,o,a,c){var f,p=e.getAttribute("data-src")||e.getAttribute("src"),g=p.split("#");if(!/\.svg/i.test(p))return void c("Attempted to inject a file with a non-svg extension: "+p);if(!d){var m=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(m?(e.setAttribute("src",m),c(null)):a?(f=g.length>1?g[1]+".png":p.split("/").pop().replace(".svg",".png"),i(u)?l(e,g[1],u):r(u)?u(e,g[1]):"string"==typeof u?e.className+=u:e.setAttribute("src",a+"/"+f),c(null)):c("This browser does not support SVG and no PNG fallback was defined."))}-1===b.indexOf(e)&&(b.push(e),e.setAttribute("src",""),N(p,function(r){if("undefined"==typeof r||"string"==typeof r)return c(r),!1;var i=e.getAttribute("id");i&&r.setAttribute("id",i);var l=e.getAttribute("title");l&&r.setAttribute("title",l);var a=[].concat(r.getAttribute("class")||[],"injected-svg",e.getAttribute("class")||[]).join(" ");r.setAttribute("class",n(a));var u=e.getAttribute("style");u&&r.setAttribute("style",u);var f=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});v.call(f,function(t){t.name&&t.value&&r.setAttribute(t.name,t.value)});for(var d,g=r.querySelectorAll("defs clipPath[id]"),m=0,A=g.length;A>m;m++){d=g[m].id+"-"+h;for(var w=r.querySelectorAll('[clip-path*="'+g[m].id+'"]'),x=0,j=w.length;j>x;x++)w[x].setAttribute("clip-path","url(#"+d+")");g[m].id=d}for(var G,N=r.querySelectorAll("defs mask[id]"),V=0,E=N.length;E>V;V++){G=N[V].id+"-"+h;for(var k=r.querySelectorAll('[mask*="'+N[V].id+'"]'),M=0,T=k.length;T>M;M++)k[M].setAttribute("mask","url(#"+G+")");N[V].id=G}r.removeAttribute("xmlns:a");for(var q,O,B=r.querySelectorAll("script"),C=[],P=0,F=B.length;F>P;P++)O=B[P].getAttribute("type"),O&&"application/ecmascript"!==O&&"application/javascript"!==O||(q=B[P].innerText||B[P].textContent,C.push(q),r.removeChild(B[P]));if(C.length>0&&("always"===o||"once"===o&&!y[p])){for(var I=0,L=C.length;L>I;I++)new Function(C[I])(t);y[p]=!0}var X=r.querySelectorAll("style");v.call(X,function(t){var e=S(r);e.indexOf(s)>=0?r.removeChild(t):t.textContent+=""}),e.parentNode.replaceChild(r,e),delete b[b.indexOf(e)],e=null,h++,c(r)}))},E=function(t,n,r){n=n||{};var i=n.evalScripts||"always",o=n.pngFallback||!1;a=n.onlyInjectVisiblePart||!0,s=n.removeStyleClass||"icon",u="undefined"==typeof n.fallbackClassName?l:n.fallbackClassName,n.forceFallbacks&&(d=!1);var c=n.each,f=e.querySelector("html");if(d?f.className.replace("no-svg",""):f.className+=" no-svg",void 0!==t.length){var p=0;v.call(t,function(e){V(e,i,o,function(e){c&&"function"==typeof c&&c(e),r&&t.length===++p&&r(p)})})}else t?V(t,i,o,function(e){c&&"function"==typeof c&&c(e),r&&r(1),t=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=E:"function"==typeof define&&define.amd?define(function(){return E}):"object"==typeof t&&(t.SVGInjector=E)}(window,document);
//# sourceMappingURL=svg-injector.map.js