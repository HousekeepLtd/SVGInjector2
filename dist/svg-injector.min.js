/**
 * SVGInjector v1.1.3-RC - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(e,t){"use strict";function n(e){e=e.split(" ");for(var t={},n=e.length,r=[];n--;)t.hasOwnProperty(e[n])||(t[e[n]]=1,r.unshift(e[n]));return r.join(" ")}function r(e){return!!(e&&e.constructor&&e.call&&e.apply)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e,t){var r=e.getAttribute("class");r=r?r:"",i(t)&&(t=t.join(" ")),t=r+" "+t,e.setAttribute("class",n(t))}function s(e,t,n){var r="undefined"==typeof n?h:n.slice(0);A.call(r,function(e,n){r[n]=e.replace("%s",t)}),l(e,r)}function a(e,t,r){r="undefined"==typeof r?h.slice(0):r.slice(0);var i=e.getAttribute("class");i&&(A.call(r,function(e,n){e=e.replace("%s",t),i.indexOf(e)>=0&&(i=i.replace(e,""))}),e.setAttribute("class",n(i)))}var o,u,c,f,p,d,v="http://www.w3.org/2000/svg",g="http://www.w3.org/1999/xlink",h=["%s","svg-sprite"],y="icon",b="file:"===e.location.protocol,m=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),A=Array.prototype.forEach||function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;var n,r=this.length>>>0;for(n=0;r>n;++n)n in this&&e.call(t,this[n],n,this)},w={},S=0,x=[],j=[],C={},N=function(e,t,n){var r;"undefined"==typeof n&&(n=["id","viewBox"]);for(var i=0;i<e.attributes.length;i++)r=e.attributes.item(i),n.indexOf(r.name)<0&&t.setAttribute(r.name,r.value)},E=function(e){var n=t.createElementNS(v,"svg");return A.call(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),N(e,n),n},T=function(e,t,n){var r=n.getAttribute("data-src").split("#");if(r.length>1){var i=r[1],l=new RegExp("\\."+i+" ","g"),s=i+"-"+t;e.textContent=e.textContent.replace(l,"."+s+" "),n.setAttribute("class",n.getAttribute("class")+" "+s)}},G=function(e){var t=e.getAttribute("class");return t?t.split(" "):[]},V=function(e,t){var n,r,i,l,s,a,u=!1,c=null;if(void 0===t)return e.cloneNode(!0);if(n=e.getElementById(t)){if(l=n.getAttribute("viewBox"),i=l.split(" "),n instanceof SVGSymbolElement)r=E(n),u=!0;else if(n instanceof SVGViewElement){if(c=null,o){var f='*[width="'+i[2]+'"][height="'+i[3]+'"]';s={},Math.abs(i[0])>0&&(s.x=i[0],f+='[x="'+i[0]+'"]'),Math.abs(i[1])>0&&(s.y=i[1],f+='[y="'+i[1]+'"]'),c=e.querySelector(f)}if(c&&c instanceof SVGSVGElement){r=c.cloneNode(!0);for(var p in s)"width"!==p&&"height"!==p&&r.removeAttribute(p)}else if(c&&c instanceof SVGUseElement){var d=e.getElementById(c.getAttributeNS(g,"href").substr(1));r=E(d),l=d.getAttribute("viewBox"),i=l.split(" "),u=!0}else u=!0,r=e.cloneNode(!0)}return u&&(r.setAttribute("viewBox",i.join(" ")),r.setAttribute("width",i[2]+"px"),r.setAttribute("height",i[3]+"px")),a=G(r),a.indexOf(t)<0&&(a.push(t),r.setAttribute("class",a.join(" "))),r}},k=function(e,t,n){j[t]=j[t]||[],j[t].push({callback:e,fragmentId:n})},M=function(e){for(var t=0,n=j[e].length;n>t;t++)!function(t){setTimeout(function(){j[e][t].callback(V(w[e],j[e][t].fragmentId))},0)}(t)},O=function(t,n){var r,i,l;if(r=t.split("#"),i=r[0],l=2===r.length?r[1]:void 0,void 0!==w[i])w[i]instanceof SVGSVGElement?n(V(w[i],l)):k(n,i,l);else{if(!e.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;w[i]={},k(n,i,l);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(404===s.status||null===s.responseXML)return n("Unable to load SVG file: "+i),b&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===s.status||b&&0===s.status))return n("There was a problem injecting the SVG: "+s.status+" "+s.statusText),!1;if(s.responseXML instanceof Document)w[i]=s.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{var r=new DOMParser;e=r.parseFromString(s.responseText,"text/xml")}catch(l){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+t),!1;w[i]=e.documentElement}M(i)}},s.open("GET",i),s.overrideMimeType&&s.overrideMimeType("text/xml"),s.send()}},q=function(t,o,v,g){var h,y=t.getAttribute("data-src")||t.getAttribute("src"),b=y.split("#");if(!/\.svg/i.test(y))return void g("Attempted to inject a file with a non-svg extension: "+y);if(!m){var w=t.getAttribute("data-fallback")||t.getAttribute("data-png");return void(w?(t.setAttribute("src",w),g(null)):v?(h=b.length>1?b[1]+".png":y.split("/").pop().replace(".svg",".png"),i(f)?s(t,b[1],f):r(f)?f(t,b[1]):"string"==typeof f?l(t,f):t.setAttribute("src",v+"/"+h),g(null)):g("This browser does not support SVG and no PNG fallback was defined."))}i(f)&&a(t,b[1],f),-1===x.indexOf(t)&&(x.push(t),t.setAttribute("src",""),O(y,function(r){if("undefined"==typeof r||"string"==typeof r)return g(r),!1;var i=t.getAttribute("id");i&&r.setAttribute("id",i);var l=t.getAttribute("title");l&&r.setAttribute("title",l);var s=[].concat(r.getAttribute("class")||[],"injected-svg",t.getAttribute("class")||[]).join(" ");r.setAttribute("class",n(s));var a=t.getAttribute("style");a&&r.setAttribute("style",a);var f=[].filter.call(t.attributes,function(e){return/^data-\w[\w\-]*$/.test(e.name)});A.call(f,function(e){e.name&&e.value&&r.setAttribute(e.name,e.value)});var v=t.getAttribute("preserveAspectRatio");v&&r.setAttribute("preserveAspectRatio",v);for(var h,b=r.querySelectorAll("defs clipPath[id]"),m=0,w=b.length;w>m;m++){h=b[m].id+"-"+S;for(var j=r.querySelectorAll('[clip-path*="'+b[m].id+'"]'),N=0,E=j.length;E>N;N++)j[N].setAttribute("clip-path","url(#"+h+")");b[m].id=h}for(var V,k=r.querySelectorAll("defs mask[id]"),M=0,O=k.length;O>M;M++){V=k[M].id+"-"+S;for(var q=r.querySelectorAll('[mask*="'+k[M].id+'"]'),B=0,P=q.length;P>B;B++)q[B].setAttribute("mask","url(#"+V+")");k[M].id=V}r.removeAttribute("xmlns:a");for(var R,F,I=r.querySelectorAll("script"),L=[],X=0,D=I.length;D>X;X++)F=I[X].getAttribute("type"),F&&"application/ecmascript"!==F&&"application/javascript"!==F||(R=I[X].innerText||I[X].textContent,L.push(R),r.removeChild(I[X]));if(L.length>0&&("always"===o||"once"===o&&!C[y])){for(var H=0,U=L.length;U>H;H++)new Function(L[H])(e);C[y]=!0}var $=r.querySelectorAll("style");A.call($,function(e){var t=G(r);(t.indexOf(u)>=0||d)&&t.indexOf(c)<0?e.parentNode.removeChild(e):p?T(e,S,r):e.textContent+=""}),t.parentNode.replaceChild(r,t),delete x[x.indexOf(t)],t=null,S++,g(r)}))},B=function(e,n,r){n=n||{};var i=n.evalScripts||"always",l=n.pngFallback||!1;o=n.onlyInjectVisiblePart||!0,c="undefined"==typeof n.keepStylesClass?"":n.keepStylesClass,u="undefined"==typeof n.removeStylesClass?y:n.removeStylesClass,d="undefined"==typeof n.removeAllStyles?!1:n.removeAllStyles,f="undefined"==typeof n.fallbackClassName?h:n.fallbackClassName,p="undefined"==typeof n.prefixStyleTags?!0:n.prefixStyleTags,n.forceFallbacks&&(m=!1);var s=n.each,a=t.querySelector("html");if(m){if(a.className.replace("no-svg",""),"undefined"==typeof n.removeStylesClass){var v="svg."+u+" {fill: currentColor;}",g=t.head||t.getElementsByTagName("head")[0],b=t.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=v:b.appendChild(t.createTextNode(v)),g.appendChild(b)}}else a.className+=" no-svg";if(void 0!==e.length){var w=0;A.call(e,function(t){q(t,i,l,function(t){s&&"function"==typeof s&&s(t),r&&e.length===++w&&r(w)})})}else e?q(e,i,l,function(t){s&&"function"==typeof s&&s(t),r&&r(1),e=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=B:"function"==typeof define&&define.amd?define(function(){return B}):"object"==typeof e&&(e.SVGInjector=B)}(window,document);
//# sourceMappingURL=svg-injector.map.js