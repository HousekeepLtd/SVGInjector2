/**
 * SVGInjector v1.2.1 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(e,t){"use strict";var i="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink",s="sprite",r=s+"--",a=s,l=r,o=[a],c="icon",f=function(e){e=e.split(" ");for(var t={},i=e.length,n=[];i--;)t.hasOwnProperty(e[i])||(t[e[i]]=1,n.unshift(e[i]));return n.join(" ")},u=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},p=function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=function(e,t){var i=e.getAttribute("class");i=i?i:"",p(t)&&(t=t.join(" ")),t=i+" "+t,e.setAttribute("class",f(t))},h=Array.prototype.forEach||function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;var i,n=this.length>>>0;for(i=0;n>i;++i)i in this&&e.call(t,this[i],i,this)},g=function(e,t,i){var n="undefined"==typeof i?o:i.slice(0);h.call(n,function(e,i){n[i]=e.replace("%s",t)}),d(e,n)},v=function(e,t,i){i="undefined"==typeof i?o.slice(0):i.slice(0);var n=e.getAttribute("class");n&&(h.call(i,function(e){e=e.replace("%s",t),n.indexOf(e)>=0&&(n=n.replace(e,""))}),e.setAttribute("class",f(n)))},m=function(e,t){var i,n,s,r=[{def:"linearGradient",attr:"fill"},{def:"radialGradient",attr:"fill"},{def:"clipPath",attr:"clip-path"},{def:"mask",attr:"mask"},{def:"filter",attr:"filter"}];h.call(r,function(r){i=r.def,n=r.attr;for(var a=e.querySelectorAll(i+"[id]"),l=0,o=a.length;o>l;l++){s=a[l].id+"-"+t;for(var c=e.querySelectorAll("["+n+'*="'+a[l].id+'"]'),f=0,u=c.length;u>f;f++)c[f].setAttribute(n,"url(#"+s+")");a[l].id=s}})},b=function(e,t,i){var n;"undefined"==typeof i&&(i=["id","viewBox"]);for(var s=0;s<e.attributes.length;s++)n=e.attributes.item(s),i.indexOf(n.name)<0&&t.setAttribute(n.name,n.value)},y=function(e){var n=t.createElementNS(i,"svg");return h.call(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),b(e,n),n},S=function(e,t,i){var n=i.getAttribute("data-src").split("#");if(n.length>1){var s=n[1],r=new RegExp("\\."+s+" ","g"),a=s+"-"+t;e.textContent=e.textContent.replace(r,"."+a+" "),i.setAttribute("class",i.getAttribute("class")+" "+a)}},A=function(e){var t=e.getAttribute("class");return t?t.split(" "):[]},x=function(e){var t=A(e),i="";return h.call(t,function(e){e.indexOf(l)>=0&&(i=e.replace(l,""))}),i},C=function(e,t,i){var s,r,a,l,o,c,f=!1,u=null;if(void 0===i)return t.cloneNode(!0);if(s=t.getElementById(i)){if(l=s.getAttribute("viewBox"),a=l.split(" "),s instanceof SVGSymbolElement)r=y(s),f=!0;else if(s instanceof SVGViewElement){if(u=null,e.onlyInjectVisiblePart){var p='*[width="'+a[2]+'"][height="'+a[3]+'"]';o={},Math.abs(parseInt(a[0]))>0&&(o.x=a[0],p+='[x="'+a[0]+'"]'),Math.abs(parseInt(a[1]))>0&&(o.y=a[1],p+='[y="'+a[1]+'"]'),u=t.querySelector(p)}if(u&&u instanceof SVGSVGElement){r=u.cloneNode(!0);for(var d in o)"width"!==d&&"height"!==d&&r.removeAttribute(d)}else if(u&&u instanceof SVGUseElement){var h=t.getElementById(u.getAttributeNS(n,"href").substr(1));r=y(h),l=h.getAttribute("viewBox"),a=l.split(" "),f=!0}else f=!0,r=t.cloneNode(!0)}f&&(r.setAttribute("viewBox",a.join(" ")),r.setAttribute("width",a[2]+"px"),r.setAttribute("height",a[3]+"px")),c=A(r);var g=e.prefixFragIdClass+i;return c.indexOf(g)<0&&(c.push(g),r.setAttribute("class",c.join(" "))),r}},w=function(e,t,i,n,s){e[i]=e[i]||[],e[i].push({callback:t,fragmentId:n,state:s})},j=function(e,t,i,n,s,r,a,l){for(var o=0,c=i[n].length;c>o;o++)!function(s){setTimeout(function(){i[n][s].callback(C(t,e[n],i[n][s].fragmentId),i[n][s].state)},0)}(o)},k=function(t,i,n,s,r,a,l,o,c,f){var u,p,d,h={onElementInjectedCallback:t,injections:i,config:a,url:l,el:o,ranScripts:c};if(u=l.split("#"),p=u[0],d=2===u.length?u[1]:void 0,void 0!==s[p])s[p]instanceof SVGSVGElement?f(C(a,s[p],d),h):w(r,f,p,d,h);else{if(!e.XMLHttpRequest)return t("Browser does not support XMLHttpRequest"),!1;s[p]={},w(r,f,p,d,h);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4===g.readyState){if(404===g.status||null===g.responseXML)return f("Unable to load SVG file: "+p),n.isLocal&&f("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),f(),!1;if(!(200===g.status||n.isLocal&&0===g.status))return t("There was a problem injecting the SVG: "+g.status+" "+g.statusText),!1;if(g.responseXML instanceof Document)s[p]=g.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{var u=new DOMParser;e=u.parseFromString(g.responseText,"text/xml")}catch(d){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return f("Unable to parse SVG file: "+l),!1;s[p]=e.documentElement}j(s,a,r,p,t,i,o,c)}},g.open("GET",p),g.overrideMimeType&&g.overrideMimeType("text/xml"),g.send()}},N=function(e){var i="svg."+e+" {fill: currentColor;}",n=t.head||t.getElementsByTagName("head")[0],s=t.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=i:s.appendChild(t.createTextNode(i)),n.appendChild(s)},E=function(e,t,i){i?e.className.replace(t,""):e.className+=" "+t},T=function(t,i){if("undefined"==typeof t||"string"==typeof t)return i.callback(t),!1;var n=i.el.getAttribute("id");n&&t.setAttribute("id",n);var s=i.el.getAttribute("title");s&&t.setAttribute("title",s);var r=[].concat(t.getAttribute("class")||[],"injected-svg",i.el.getAttribute("class")||[]).join(" ");t.setAttribute("class",f(r));var a=i.el.getAttribute("style");a&&t.setAttribute("style",a);var l=[].filter.call(i.el.attributes,function(e){return/^data-\w[\w\-]*$/.test(e.name)});h.call(l,function(e){e.name&&e.value&&t.setAttribute(e.name,e.value)});var o=i.el.getAttribute("preserveAspectRatio");o&&t.setAttribute("preserveAspectRatio",o),m(t,i.injections.count),t.removeAttribute("xmlns:a");for(var c,u,p=t.querySelectorAll("script"),d=[],g=0,v=p.length;v>g;g++)u=p[g].getAttribute("type"),u&&"application/ecmascript"!==u&&"application/javascript"!==u||(c=p[g].innerText||p[g].textContent,d.push(c),t.removeChild(p[g]));if(d.length>0&&("always"===config.evalScripts||"once"===config.evalScripts&&!i.ranScripts[i.url])){for(var b=0,y=d.length;y>b;b++)new Function(d[b])(e);i.ranScripts[i.url]=!0}var x=t.querySelectorAll("style");h.call(x,function(e){var n=A(t);(n.indexOf(config.removeStylesClass)>=0||config.removeAllStyles)&&n.indexOf(config.keepStylesClass)<0?e.parentNode.removeChild(e):config.prefixStyleTags?S(e,i.injections.count,t):e.textContent+=""}),i.el.parentNode.replaceChild(t,i.el),delete i.injections.elements[i.injections.elements.indexOf(i.el)],i.injections.count++,i.onElementInjectedCallback(t)},G=function(i){i=i||{},this.env={},this.env.isLocal="file:"===e.location.protocol,this.env.hasSvgSupport=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),this.svgCache={},this.injections={count:0,elements:[]},this.requestQueue=[],this.ranScripts={},this.config={},this.config.evalScripts=i.evalScripts||"always",this.config.pngFallback=i.pngFallback||!1,this.config.onlyInjectVisiblePart=i.onlyInjectVisiblePart||!0,this.config.keepStylesClass="undefined"==typeof i.keepStylesClass?"":i.keepStylesClass,this.config.spriteClassName="undefined"==typeof i.spriteClassName?s:i.spriteClassName,this.config.spriteClassIdName="undefined"==typeof i.spriteClassIdName?r:i.spriteClassIdName,this.config.removeStylesClass="undefined"==typeof i.removeStylesClass?c:i.removeStylesClass,this.config.removeAllStyles="undefined"==typeof i.removeAllStyles?!1:i.removeAllStyles,this.config.fallbackClassName="undefined"==typeof i.fallbackClassName?o:i.fallbackClassName,this.config.prefixStyleTags="undefined"==typeof i.prefixStyleTags?!0:i.prefixStyleTags,this.config.spritesheetURL="undefined"==typeof i.spritesheetURL||""===i.spritesheetURL?!1:i.spritesheetURL,this.config.prefixFragIdClass=l,this.config.forceFallbacks="undefined"==typeof i.forceFallbacks?!1:i.forceFallbacks,this.config.forceFallbacks&&(this.env.hasSvgSupport=!1),E(t.querySelector("html"),"no-svg",this.env.hasSvgSupport),this.env.hasSvgSupport&&"undefined"==typeof i.removeStylesClass&&N(this.config.removeStylesClass)};G.prototype.inject=function(e,t,i){if(void 0!==e.length){var n=0,s=this;h.call(e,function(r){s.injectElement(r,function(s){i&&"function"==typeof i&&i(s),t&&e.length===++n&&t(n)})})}else e?this.injectElement(e,function(n){i&&"function"==typeof i&&i(n),t&&t(1),e=null}):t&&t(0)},G.prototype.injectElement=function(e,t){var i;this.config.spritesheetURL===!1?i=e.getAttribute("data-src")||e.getAttribute("src"):(i=this.config.spritesheetURL+"#"+x(e),e.setAttribute("data-src",i));var n,s=i.split("#");if(!/\.svg/i.test(i))return void t("Attempted to inject a file with a non-svg extension: "+i);if(!this.env.hasSvgSupport){var r=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(r?(e.setAttribute("src",r),t(null)):this.config.pngFallback?(n=s.length>1?s[1]+".png":i.split("/").pop().replace(".svg",".png"),p(this.config.fallbackClassName)?g(e,s[1],this.config.fallbackClassName):u(this.config.fallbackClassName)?this.config.fallbackClassName(e,s[1]):"string"==typeof this.config.fallbackClassName?d(e,this.config.fallbackClassName):e.setAttribute("src",pngFallback+"/"+n),t(null)):t("This browser does not support SVG and no PNG fallback was defined."))}p(this.config.fallbackClassName)&&v(e,s[1],this.config.fallbackClassName),-1===this.injections.elements.indexOf(e)&&(this.injections.elements.push(e),e.setAttribute("src",""),k(t,this.injections,this.env,this.svgCache,this.requestQueue,this.config,i,e,this.ranScripts,T))},"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=G:"function"==typeof define&&define.amd?define(function(){return G}):"object"==typeof e&&(e.SVGInjector=G)}(window,document);
//# sourceMappingURL=svg-injector.map.js