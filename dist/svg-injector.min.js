/**
 * SVGInjector v1.1.3-RC - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(t,e){"use strict";function n(t){t=t.split(" ");for(var e={},n=t.length,r=[];n--;)e.hasOwnProperty(t[n])||(e[t[n]]=1,r.unshift(t[n]));return r.join(" ")}function r(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t,e){var r=t.getAttribute("class");r=r?r:"",i(e)&&(e=e.join(" ")),e=r+" "+e,t.setAttribute("class",n(e))}function l(t,e,n){var r="undefined"==typeof n?d:n.slice(0);h.call(r,function(t,n){r[n]=t.replace("%s",e)}),o(t,r)}function a(t,e,r){r="undefined"==typeof r?d.slice(0):r.slice(0);var i=t.getAttribute("class");h.call(r,function(t,n){t=t.replace("%s",e),i=i.replace(t,"")}),t.setAttribute("class",n(i))}var s,u,c,f="http://www.w3.org/2000/svg",p="http://www.w3.org/1999/xlink",d=["%s","%s-dims","svg-sprite"],v="file:"===t.location.protocol,g=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),h=Array.prototype.forEach||function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var n,r=this.length>>>0;for(n=0;r>n;++n)n in this&&t.call(e,this[n],n,this)},b={},m=0,y=[],A=[],w={},S=function(t,e,n){var r;"undefined"==typeof n&&(n=["id","viewBox"]);for(var i=0;i<t.attributes.length;i++)r=t.attributes.item(i),n.indexOf(r.name)<0&&e.setAttribute(r.name,r.value)},x=function(t){var n=e.createElementNS(f,"svg");return h.call(t.childNodes,function(t){n.appendChild(t.cloneNode(!0))}),S(t,n),n},j=function(t){var e=t.getAttribute("class");return e?e.split(" "):[]},G=function(t,e){var n,r,i,o,l,a,u=!1,c=null;if(void 0===e)return t.cloneNode(!0);if(n=t.getElementById(e)){if(o=n.getAttribute("viewBox"),i=o.split(" "),n instanceof SVGSymbolElement)r=x(n),u=!0;else if(n instanceof SVGViewElement){if(c=null,s){var f='*[width="'+i[2]+'"][height="'+i[3]+'"]';l={},Math.abs(i[0])>0&&(l.x=i[0],f+='[x="'+i[0]+'"]'),Math.abs(i[1])>0&&(l.y=i[1],f+='[y="'+i[1]+'"]'),c=t.querySelector(f)}if(c&&c instanceof SVGSVGElement){r=c.cloneNode(!0);for(var d in l)"width"!==d&&"height"!==d&&r.removeAttribute(d)}else if(c&&c instanceof SVGUseElement){var v=t.getElementById(c.getAttributeNS(p,"href").substr(1));r=x(v),o=v.getAttribute("viewBox"),i=o.split(" "),u=!0}else u=!0,r=t.cloneNode(!0)}return u&&(r.setAttribute("viewBox",i.join(" ")),r.setAttribute("width",i[2]+"px"),r.setAttribute("height",i[3]+"px")),a=j(r),a.indexOf(e)<0&&(a.push(e),r.setAttribute("class",a.join(" "))),r}},V=function(t,e,n){A[e]=A[e]||[],A[e].push({callback:t,fragmentId:n})},N=function(t){for(var e=0,n=A[t].length;n>e;e++)!function(e){setTimeout(function(){A[t][e].callback(G(b[t],A[t][e].fragmentId))},0)}(e)},E=function(e,n){var r,i,o;if(r=e.split("#"),i=r[0],o=2===r.length?r[1]:void 0,void 0!==b[i])b[i]instanceof SVGSVGElement?n(G(b[i],o)):V(n,i,o);else{if(!t.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;b[i]={},V(n,i,o);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(404===l.status||null===l.responseXML)return n("Unable to load SVG file: "+i),v&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===l.status||v&&0===l.status))return n("There was a problem injecting the SVG: "+l.status+" "+l.statusText),!1;if(l.responseXML instanceof Document)b[i]=l.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t;try{var r=new DOMParser;t=r.parseFromString(l.responseText,"text/xml")}catch(o){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+e),!1;b[i]=t.documentElement}N(i)}},l.open("GET",i),l.overrideMimeType&&l.overrideMimeType("text/xml"),l.send()}},k=function(e,s,f,p){var d,v=e.getAttribute("data-src")||e.getAttribute("src"),b=v.split("#");if(!/\.svg/i.test(v))return void p("Attempted to inject a file with a non-svg extension: "+v);if(!g){var A=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(A?(e.setAttribute("src",A),p(null)):f?(d=b.length>1?b[1]+".png":v.split("/").pop().replace(".svg",".png"),i(c)?l(e,b[1],c):r(c)?c(e,b[1]):"string"==typeof c?o(e,c):e.setAttribute("src",f+"/"+d),p(null)):p("This browser does not support SVG and no PNG fallback was defined."))}i(c)&&a(e,b[1],c),-1===y.indexOf(e)&&(y.push(e),e.setAttribute("src",""),E(v,function(r){if("undefined"==typeof r||"string"==typeof r)return p(r),!1;var i=e.getAttribute("id");i&&r.setAttribute("id",i);var o=e.getAttribute("title");o&&r.setAttribute("title",o);var l=[].concat(r.getAttribute("class")||[],"injected-svg",e.getAttribute("class")||[]).join(" ");r.setAttribute("class",n(l));var a=e.getAttribute("style");a&&r.setAttribute("style",a);var c=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});h.call(c,function(t){t.name&&t.value&&r.setAttribute(t.name,t.value)});for(var f,d=r.querySelectorAll("defs clipPath[id]"),g=0,b=d.length;b>g;g++){f=d[g].id+"-"+m;for(var A=r.querySelectorAll('[clip-path*="'+d[g].id+'"]'),S=0,x=A.length;x>S;S++)A[S].setAttribute("clip-path","url(#"+f+")");d[g].id=f}for(var G,V=r.querySelectorAll("defs mask[id]"),N=0,E=V.length;E>N;N++){G=V[N].id+"-"+m;for(var k=r.querySelectorAll('[mask*="'+V[N].id+'"]'),M=0,T=k.length;T>M;M++)k[M].setAttribute("mask","url(#"+G+")");V[N].id=G}r.removeAttribute("xmlns:a");for(var q,O,B=r.querySelectorAll("script"),C=[],P=0,F=B.length;F>P;P++)O=B[P].getAttribute("type"),O&&"application/ecmascript"!==O&&"application/javascript"!==O||(q=B[P].innerText||B[P].textContent,C.push(q),r.removeChild(B[P]));if(C.length>0&&("always"===s||"once"===s&&!w[v])){for(var I=0,L=C.length;L>I;I++)new Function(C[I])(t);w[v]=!0}var X=r.querySelectorAll("style");h.call(X,function(t){var e=j(r);e.indexOf(u)>=0?r.removeChild(t):t.textContent+=""}),e.parentNode.replaceChild(r,e),delete y[y.indexOf(e)],e=null,m++,p(r)}))},M=function(t,n,r){n=n||{};var i=n.evalScripts||"always",o=n.pngFallback||!1;s=n.onlyInjectVisiblePart||!0,u=n.removeStyleClass||"icon",c="undefined"==typeof n.fallbackClassName?d:n.fallbackClassName,n.forceFallbacks&&(g=!1);var l=n.each,a=e.querySelector("html");if(g?a.className.replace("no-svg",""):a.className+=" no-svg",void 0!==t.length){var f=0;h.call(t,function(e){k(e,i,o,function(e){l&&"function"==typeof l&&l(e),r&&t.length===++f&&r(f)})})}else t?k(t,i,o,function(e){l&&"function"==typeof l&&l(e),r&&r(1),t=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=M:"function"==typeof define&&define.amd?define(function(){return M}):"object"==typeof t&&(t.SVGInjector=M)}(window,document);
//# sourceMappingURL=svg-injector.map.js