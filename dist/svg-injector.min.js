/**
 * SVGInjector v2.0.0 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/flobacher/SVGInjector2
 * forked from:
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2015 flobacher <flo@digital-fuse.net>
 * @license MIT
 *
 * original Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(e,t){"use strict";var r=function(){function r(e){r.instanceCounter++,"undefined"!=typeof e&&this.init(e)}var n,a,s,i,l,o,c="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink",f="sprite",p=f+"--",d=[f],v="icon";s=[],r.instanceCounter=0,r.prototype.init=function(r){r=r||{},n={},o={},o.isLocal="file:"===e.location.protocol,o.hasSvgSupport=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),a={count:0,elements:[]},i={},l={},l.evalScripts=r.evalScripts||"always",l.pngFallback=r.pngFallback||!1,l.onlyInjectVisiblePart=r.onlyInjectVisiblePart||!0,l.keepStylesClass="undefined"==typeof r.keepStylesClass?"":r.keepStylesClass,l.spriteClassName="undefined"==typeof r.spriteClassName?f:r.spriteClassName,l.spriteClassIdName="undefined"==typeof r.spriteClassIdName?p:r.spriteClassIdName,l.removeStylesClass="undefined"==typeof r.removeStylesClass?v:r.removeStylesClass,l.removeAllStyles="undefined"==typeof r.removeAllStyles?!1:r.removeAllStyles,l.fallbackClassName="undefined"==typeof r.fallbackClassName?d:r.fallbackClassName,l.prefixStyleTags="undefined"==typeof r.prefixStyleTags?!0:r.prefixStyleTags,l.spritesheetURL="undefined"==typeof r.spritesheetURL||""===r.spritesheetURL?!1:r.spritesheetURL,l.prefixFragIdClass=l.spriteClassIdName,l.forceFallbacks="undefined"==typeof r.forceFallbacks?!1:r.forceFallbacks,l.forceFallbacks&&(o.hasSvgSupport=!1),E(t.querySelector("html"),"no-svg",o.hasSvgSupport),o.hasSvgSupport&&"undefined"==typeof r.removeStylesClass&&j(l.removeStylesClass)},r.prototype.inject=function(e,t,r){if(void 0!==e.length){var n=0,a=this;O.call(e,function(s){a.injectElement(s,function(a){r&&"function"==typeof r&&r(a),t&&e.length===++n&&t(n)})})}else e?this.injectElement(e,function(n){r&&"function"==typeof r&&r(n),t&&t(1),e=null}):t&&t(0)},r.prototype.injectElement=function(e,t){var r,n;if(l.spritesheetURL===!1||e.getAttribute("data-src")||e.getAttribute("src"))r=e.getAttribute("data-src")||e.getAttribute("src");else{if(n=x(e),""===n)return;r=l.spritesheetURL+"#"+n,e.setAttribute("data-src",r)}var s=r.split("#");1===s.length&&s.push("");var i;if(!/\.svg/i.test(r))return void t("Attempted to inject a file with a non-svg extension: "+r);if(!o.hasSvgSupport){var c=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(c?(e.setAttribute("src",c),t(null)):l.pngFallback?(i=s.length>1?s[1]+".png":r.split("/").pop().replace(".svg",".png"),V(l.fallbackClassName)?m(e,s[1],l.fallbackClassName):T(l.fallbackClassName)?l.fallbackClassName(e,s[1]):"string"==typeof l.fallbackClassName?F(e,l.fallbackClassName):e.setAttribute("src",l.pngFallback+"/"+i),t(null)):t("This browser does not support SVG and no PNG fallback was defined."))}V(l.fallbackClassName)&&g(e,s[1],l.fallbackClassName),-1===a.elements.indexOf(e)&&(a.elements.push(e),e.setAttribute("src",""),N(t,r,e))},r.prototype.getEnv=function(){return o};var m=function(e,t,r){var n="undefined"==typeof r?d:r.slice(0);O.call(n,function(e,r){n[r]=e.replace("%s",t)}),F(e,n)},g=function(e,t,r){r="undefined"==typeof r?d.slice(0):r.slice(0);var n,a,s=e.getAttribute("class");"undefined"!=typeof s&&null!==s&&(a=s.split(" "),a&&(O.call(r,function(e){e=e.replace("%s",t),n=a.indexOf(e),n>=0&&(a[n]="")}),e.setAttribute("class",G(a.join(" ")))))},y=function(e,t){var r,n,a,s=[{def:"linearGradient",attr:"fill"},{def:"radialGradient",attr:"fill"},{def:"linearGradient",attr:"stroke"},{def:"radialGradient",attr:"stroke"},{def:"clipPath",attr:"clip-path"},{def:"mask",attr:"mask"},{def:"filter",attr:"filter"},{def:"color-profile",attr:"color-profile"},{def:"cursor",attr:"cursor"},{def:"marker",attr:"marker-start"},{def:"marker",attr:"marker-mid"},{def:"marker",attr:"marker-end"}];O.call(s,function(s){r=s.def,n=s.attr;for(var i=e.querySelectorAll(r+"[id]"),l=0,o=i.length;o>l;l++){a=i[l].id+"-"+t;for(var c=e.querySelectorAll("["+n+'*="'+i[l].id+'"]'),u=0,f=c.length;f>u;u++)c[u].setAttribute(n,"url(#"+a+")");i[l].id=a}})},b=function(e,t,r){var n;"undefined"==typeof r&&(r=["id","viewBox"]);for(var a=0;a<e.attributes.length;a++)n=e.attributes.item(a),r.indexOf(n.name)<0&&t.setAttribute(n.name,n.value)},h=function(e){var r=t.createElementNS(c,"svg");return O.call(e.childNodes,function(e){r.appendChild(e.cloneNode(!0))}),b(e,r),r},S=function(e,t,r){var n,a,s,i,l,o,c=r.getAttribute("data-src").split("#"),u=e.textContent,f="",p=function(e,t,r){r[t]="."+s+" "+e};if(c.length>1)a=c[1],s=a+"-"+t,n=new RegExp("\\."+a+" ","g"),e.textContent=u.replace(n,"."+s+" ");else{for(i=c[0].split("/"),s=i[i.length-1].replace(".svg","")+"-"+t,n=new RegExp("([\\s\\S]*?){([\\s\\S]*?)}","g");null!==(l=n.exec(u));){o=l[1].trim().split(", "),o.forEach(p);var d=o.join(", ")+"{"+l[2]+"}";f+=d}e.textContent=f}r.setAttribute("class",r.getAttribute("class")+" "+s)},A=function(e){var t=e.getAttribute("class");return t?t.split(" "):[]},x=function(e){var t=A(e),r="";return O.call(t,function(e){e.indexOf(l.spriteClassIdName)>=0&&(r=e.replace(l.spriteClassIdName,""))}),r},C=function(e,t,r){var n,a,s,i,l,o,c=!1,f=null;if(void 0===r)return t.cloneNode(!0);if(n=t.getElementById(r)){if(i=n.getAttribute("viewBox"),s=i.split(" "),n instanceof SVGSymbolElement)a=h(n),c=!0;else if(n instanceof SVGViewElement){if(f=null,e.onlyInjectVisiblePart){var p='*[width="'+s[2]+'"][height="'+s[3]+'"]';l={},0===Math.abs(parseInt(s[0]))?p+=":not([x])":(l.x=s[0],p+='[x="'+s[0]+'"]'),0===Math.abs(parseInt(s[1]))?p+=":not([y])":(l.y=s[1],p+='[y="'+s[1]+'"]');var d=t.querySelectorAll(p);d.length>1,f=d[0]}if(f&&f instanceof SVGSVGElement){a=f.cloneNode(!0);for(var v in l)"width"!==v&&"height"!==v&&a.removeAttribute(v)}else if(f&&f instanceof SVGUseElement){var m=t.getElementById(f.getAttributeNS(u,"href").substr(1));a=h(m),i=m.getAttribute("viewBox"),s=i.split(" "),c=!0}else c=!0,a=t.cloneNode(!0)}c&&(a.setAttribute("viewBox",s.join(" ")),a.setAttribute("width",s[2]+"px"),a.setAttribute("height",s[3]+"px")),o=A(a);var g=e.prefixFragIdClass+r;return o.indexOf(g)<0&&(o.push(g),a.setAttribute("class",o.join(" "))),a}},w=function(e,t,r,n){s[e]=s[e]||[],s[e].push({callback:r,fragmentId:t,element:n})},k=function(e){for(var t,r=0,n=s[e].length;n>r;r++)!function(r){setTimeout(function(){t=s[e][r],I(e,t.fragmentId,t.callback,t.element)},0)}(r)},N=function(t,r,a){var s,i,l;if(s=r.split("#"),i=s[0],l=2===s.length?s[1]:void 0,void 0!==n[i])n[i]instanceof SVGSVGElement?I(i,l,t,a):w(i,l,t,a);else{if(!e.XMLHttpRequest)return t("Browser does not support XMLHttpRequest"),!1;n[i]={},w(i,l,t,a);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){if(404===c.status||null===c.responseXML)return t("Unable to load SVG file: "+i),!1;if(!(200===c.status||o.isLocal&&0===c.status))return t("There was a problem injecting the SVG: "+c.status+" "+c.statusText),!1;if(c.responseXML instanceof Document)n[i]=c.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{var a=new DOMParser;e=a.parseFromString(c.responseText,"text/xml")}catch(s){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return t("Unable to parse SVG file: "+r),!1;n[i]=e.documentElement}k(i)}},c.open("GET",i),c.overrideMimeType&&c.overrideMimeType("text/xml"),c.send()}},j=function(e){var r="svg."+e+" {fill: currentColor;}",n=t.head||t.getElementsByTagName("head")[0],a=t.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=r:a.appendChild(t.createTextNode(r)),n.appendChild(a)},E=function(e,t,r){r?e.className.replace(t,""):e.className+=" "+t},I=function(t,r,s,o){var c=C(l,n[t],r);if("undefined"==typeof c||"string"==typeof c)return s(c),!1;var u=o.getAttribute("id");u&&c.setAttribute("id",u);var f=o.getAttribute("title");f&&c.setAttribute("title",f);var p=[].concat(c.getAttribute("class")||[],"injected-svg",o.getAttribute("class")||[]).join(" ");c.setAttribute("class",G(p));var d=o.getAttribute("style");d&&c.setAttribute("style",d);var v=[].filter.call(o.attributes,function(e){return/^data-\w[\w\-]*$/.test(e.name)});O.call(v,function(e){e.name&&e.value&&c.setAttribute(e.name,e.value)});var m=o.getAttribute("preserveAspectRatio");m&&c.setAttribute("preserveAspectRatio",m),y(c,a.count),c.removeAttribute("xmlns:a");for(var g,b,h=c.querySelectorAll("script"),x=[],w=0,k=h.length;k>w;w++)b=h[w].getAttribute("type"),b&&"application/ecmascript"!==b&&"application/javascript"!==b||(g=h[w].innerText||h[w].textContent,x.push(g),c.removeChild(h[w]));if(x.length>0&&("always"===l.evalScripts||"once"===l.evalScripts&&!i[t])){for(var N=0,j=x.length;j>N;N++)new Function(x[N])(e);i[t]=!0}var E=c.querySelectorAll("style");O.call(E,function(e){var t=A(c);(t.indexOf(l.removeStylesClass)>=0||l.removeAllStyles)&&t.indexOf(l.keepStylesClass)<0?e.parentNode.removeChild(e):l.prefixStyleTags?S(e,a.count,c):e.textContent+=""}),o.parentNode.replaceChild(c,o),delete a.elements[a.elements.indexOf(o)],a.count++,s(c)},G=function(e){e=e.split(" ");for(var t={},r=e.length,n=[];r--;)t.hasOwnProperty(e[r])||(t[e[r]]=1,n.unshift(e[r]));return n.join(" ")},T=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},V=function(e){return"[object Array]"===Object.prototype.toString.call(e)},F=function(e,t){var r=e.getAttribute("class");r=r?r:"",V(t)&&(t=t.join(" ")),t=r+" "+t,e.setAttribute("class",G(t))},O=Array.prototype.forEach||function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;var r,n=this.length>>>0;for(r=0;n>r;++r)r in this&&e.call(t,this[r],r,this)};return r}();"object"==typeof angular?angular.module("svginjector",[]).provider("svgInjectorOptions",function(){var e={};return{set:function(t){e=t},$get:function(){return e}}}).factory("svgInjectorFactory",["svgInjectorOptions",function(e){return new r(e)}]).directive("svg",["svgInjectorFactory",function(e){return{restrict:"E",link:function(t,r,n){n.hasOwnProperty("class")?n.$observe("class",function(){e.inject(r[0])}):e.inject(r[0])}}}]):"object"==typeof module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof e&&(e.SVGInjector=r)}(window,document);
//# sourceMappingURL=svg-injector.map.js