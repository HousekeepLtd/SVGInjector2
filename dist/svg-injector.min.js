/**
 * SVGInjector v1.2.1 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(e,t){"use strict";function r(e){return e.replace(/^([A-Z])|[-_](\w)/g,function(e,t,r,n){return r?r.toUpperCase():t.toLowerCase()})}function n(e){e=e.split(" ");for(var t={},r=e.length,n=[];r--;)t.hasOwnProperty(e[r])||(t[e[r]]=1,n.unshift(e[r]));return n.join(" ")}function i(e){return!!(e&&e.constructor&&e.call&&e.apply)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e,t){var r=e.getAttribute("class");r=r?r:"",l(t)&&(t=t.join(" ")),t=r+" "+t,e.setAttribute("class",n(t))}function a(e,t,r){var n="undefined"==typeof r?C:r.slice(0);T.call(n,function(e,r){n[r]=e.replace("%s",t)}),s(e,n)}function o(e,t,r){r="undefined"==typeof r?C.slice(0):r.slice(0);var i=e.getAttribute("class");i&&(T.call(r,function(e,r){e=e.replace("%s",t),i.indexOf(e)>=0&&(i=i.replace(e,""))}),e.setAttribute("class",n(i)))}function u(e,t){var n=["fill","clip-path","mask","filter"];T.call(n,function(n,i,l){for(var s,a=r(n),o=e.querySelectorAll(a+"[id]"),u=0,c=o.length;c>u;u++){s=o[u].id+"-"+t;for(var f=e.querySelectorAll("["+n+'*="'+o[u].id+'"]'),p=0,d=f.length;d>p;p++)f[p].setAttribute(n,"url(#"+s+")");o[u].id=s}})}var c,f,p,d,v,g,h,y,b="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",A="sprite",w=A+"--",S=A,x=w,C=[x+"%s",S],N="icon",j="file:"===e.location.protocol,E=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),T=Array.prototype.forEach||function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;var r,n=this.length>>>0;for(r=0;n>r;++r)r in this&&e.call(t,this[r],r,this)},k={},G=0,V=[],O=[],q={},M=function(e,t,r){var n;"undefined"==typeof r&&(r=["id","viewBox"]);for(var i=0;i<e.attributes.length;i++)n=e.attributes.item(i),r.indexOf(n.name)<0&&t.setAttribute(n.name,n.value)},B=function(e){var r=t.createElementNS(b,"svg");return T.call(e.childNodes,function(e){r.appendChild(e.cloneNode(!0))}),M(e,r),r},L=function(e,t,r){var n=r.getAttribute("data-src").split("#");if(n.length>1){var i=n[1],l=new RegExp("\\."+i+" ","g"),s=i+"-"+t;e.textContent=e.textContent.replace(l,"."+s+" "),r.setAttribute("class",r.getAttribute("class")+" "+s)}},R=function(e){var t=e.getAttribute("class");return t?t.split(" "):[]},I=function(e){var t=R(e),r="";return T.call(t,function(e){e.indexOf(x)>=0&&(r=e.replace(x,""))}),r},P=function(e,t){var r,n,i,l,s,a,o=!1,u=null;if(void 0===t)return e.cloneNode(!0);if(r=e.getElementById(t)){if(l=r.getAttribute("viewBox"),i=l.split(" "),r instanceof SVGSymbolElement)n=B(r),o=!0;else if(r instanceof SVGViewElement){if(u=null,c){var f='*[width="'+i[2]+'"][height="'+i[3]+'"]';s={},Math.abs(i[0])>0&&(s.x=i[0],f+='[x="'+i[0]+'"]'),Math.abs(i[1])>0&&(s.y=i[1],f+='[y="'+i[1]+'"]'),u=e.querySelector(f)}if(u&&u instanceof SVGSVGElement){n=u.cloneNode(!0);for(var p in s)"width"!==p&&"height"!==p&&n.removeAttribute(p)}else if(u&&u instanceof SVGUseElement){var d=e.getElementById(u.getAttributeNS(m,"href").substr(1));n=B(d),l=d.getAttribute("viewBox"),i=l.split(" "),o=!0}else o=!0,n=e.cloneNode(!0)}o&&(n.setAttribute("viewBox",i.join(" ")),n.setAttribute("width",i[2]+"px"),n.setAttribute("height",i[3]+"px")),a=R(n);var v=y+t;return a.indexOf(v)<0&&(a.push(v),n.setAttribute("class",a.join(" "))),n}},U=function(e,t,r){O[t]=O[t]||[],O[t].push({callback:e,fragmentId:r})},F=function(e){for(var t=0,r=O[e].length;r>t;t++)!function(t){setTimeout(function(){O[e][t].callback(P(k[e],O[e][t].fragmentId))},0)}(t)},X=function(t,r){var n,i,l;if(n=t.split("#"),i=n[0],l=2===n.length?n[1]:void 0,void 0!==k[i])k[i]instanceof SVGSVGElement?r(P(k[i],l)):U(r,i,l);else{if(!e.XMLHttpRequest)return r("Browser does not support XMLHttpRequest"),!1;k[i]={},U(r,i,l);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(404===s.status||null===s.responseXML)return r("Unable to load SVG file: "+i),j&&r("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),r(),!1;if(!(200===s.status||j&&0===s.status))return r("There was a problem injecting the SVG: "+s.status+" "+s.statusText),!1;if(s.responseXML instanceof Document)k[i]=s.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{var n=new DOMParser;e=n.parseFromString(s.responseText,"text/xml")}catch(l){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return r("Unable to parse SVG file: "+t),!1;k[i]=e.documentElement}F(i)}},s.open("GET",i),s.overrideMimeType&&s.overrideMimeType("text/xml"),s.send()}},D=function(t,r,c,y){var b;h===!1?b=t.getAttribute("data-src")||t.getAttribute("src"):(b=h+"#"+I(t),t.setAttribute("data-src",b));var m,A=b.split("#");if(!/\.svg/i.test(b))return void y("Attempted to inject a file with a non-svg extension: "+b);if(!E){var w=t.getAttribute("data-fallback")||t.getAttribute("data-png");return void(w?(t.setAttribute("src",w),y(null)):c?(m=A.length>1?A[1]+".png":b.split("/").pop().replace(".svg",".png"),l(d)?a(t,A[1],d):i(d)?d(t,A[1]):"string"==typeof d?s(t,d):t.setAttribute("src",c+"/"+m),y(null)):y("This browser does not support SVG and no PNG fallback was defined."))}l(d)&&o(t,A[1],d),-1===V.indexOf(t)&&(V.push(t),t.setAttribute("src",""),X(b,function(i){if("undefined"==typeof i||"string"==typeof i)return y(i),!1;var l=t.getAttribute("id");l&&i.setAttribute("id",l);var s=t.getAttribute("title");s&&i.setAttribute("title",s);var a=[].concat(i.getAttribute("class")||[],"injected-svg",t.getAttribute("class")||[]).join(" ");i.setAttribute("class",n(a));var o=t.getAttribute("style");o&&i.setAttribute("style",o);var c=[].filter.call(t.attributes,function(e){return/^data-\w[\w\-]*$/.test(e.name)});T.call(c,function(e){e.name&&e.value&&i.setAttribute(e.name,e.value)});var d=t.getAttribute("preserveAspectRatio");d&&i.setAttribute("preserveAspectRatio",d);for(var h,m=i.querySelectorAll("defs clipPath[id]"),A=0,w=m.length;w>A;A++){h=m[A].id+"-"+G;for(var S=i.querySelectorAll('[clip-path*="'+m[A].id+'"]'),x=0,C=S.length;C>x;x++)S[x].setAttribute("clip-path","url(#"+h+")");m[A].id=h}for(var N,j=i.querySelectorAll("defs mask[id]"),E=0,k=j.length;k>E;E++){N=j[E].id+"-"+G;for(var O=i.querySelectorAll('[mask*="'+j[E].id+'"]'),M=0,B=O.length;B>M;M++)O[M].setAttribute("mask","url(#"+N+")");j[E].id=N}u(i,G),i.removeAttribute("xmlns:a");for(var I,P,U=i.querySelectorAll("script"),F=[],X=0,D=U.length;D>X;X++)P=U[X].getAttribute("type"),P&&"application/ecmascript"!==P&&"application/javascript"!==P||(I=U[X].innerText||U[X].textContent,F.push(I),i.removeChild(U[X]));if(F.length>0&&("always"===r||"once"===r&&!q[b])){for(var H=0,Z=F.length;Z>H;H++)new Function(F[H])(e);q[b]=!0}var $=i.querySelectorAll("style");T.call($,function(e){var t=R(i);(t.indexOf(f)>=0||g)&&t.indexOf(p)<0?e.parentNode.removeChild(e):v?L(e,G,i):e.textContent+=""}),t.parentNode.replaceChild(i,t),delete V[V.indexOf(t)],t=null,G++,y(i)}))},H=function(e,r,n){r=r||{};var i=r.evalScripts||"always",l=r.pngFallback||!1;c=r.onlyInjectVisiblePart||!0,p="undefined"==typeof r.keepStylesClass?"":r.keepStylesClass,S="undefined"==typeof r.spriteClassName?A:r.spriteClassName,x="undefined"==typeof r.spriteClassIdName?w:r.spriteClassIdName,f="undefined"==typeof r.removeStylesClass?N:r.removeStylesClass,g="undefined"==typeof r.removeAllStyles?!1:r.removeAllStyles,d="undefined"==typeof r.fallbackClassName?C:r.fallbackClassName,v="undefined"==typeof r.prefixStyleTags?!0:r.prefixStyleTags,h="undefined"==typeof r.spritesheetURL||""===r.spritesheetURL?!1:r.spritesheetURL,y=x,r.forceFallbacks&&(E=!1);var s=r.each,a=t.querySelector("html");if(E){if(a.className.replace("no-svg",""),"undefined"==typeof r.removeStylesClass){var o="svg."+f+" {fill: currentColor;}",u=t.head||t.getElementsByTagName("head")[0],b=t.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=o:b.appendChild(t.createTextNode(o)),u.appendChild(b)}}else a.className+=" no-svg";if(void 0!==e.length){var m=0;T.call(e,function(t){D(t,i,l,function(t){s&&"function"==typeof s&&s(t),n&&e.length===++m&&n(m)})})}else e?D(e,i,l,function(t){s&&"function"==typeof s&&s(t),n&&n(1),e=null}):n&&n(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=H:"function"==typeof define&&define.amd?define(function(){return H}):"object"==typeof e&&(e.SVGInjector=H)}(window,document);
//# sourceMappingURL=svg-injector.map.js