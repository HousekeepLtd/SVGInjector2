{"version":3,"file":"./svg-injector.min.js","sources":["./svg-injector.js"],"names":["window","document","uniqueClasses","list","split","hash","i","length","out","hasOwnProperty","unshift","join","isFunction","obj","constructor","call","apply","isArray","Object","prototype","toString","svgElemSetClassName","el","className","curClasses","getAttribute","setAttribute","setFallbackClassNames","element","symbolId","classNames","slice","forEach","curClassName","idx","replace","onlyInjectVisiblePart","removeStylesClass","fallbackClassName","svgNS","xlinkNS","isLocal","location","protocol","hasSvgSupport","implementation","hasFeature","Array","fn","scope","this","TypeError","len","svgCache","injectCount","injectedElements","requestQueue","ranScripts","copyAttributes","svgElemSource","svgElemTarget","attributesToIgnore","curAttr","attributes","item","indexOf","name","value","cloneSymbolAsSVG","svgSymbol","svg","createElementNS","childNodes","child","appendChild","cloneNode","getClassList","svgToCheck","curClassAttr","cloneSvg","sourceSvg","fragId","svgElem","newSVG","viewBox","viewBoxAttr","symbolAttributesToFind","curClassList","setViewboxOnNewSVG","symbolElem","undefined","getElementById","SVGSymbolElement","SVGViewElement","selector","Math","abs","x","y","querySelector","SVGSVGElement","prop","removeAttribute","SVGUseElement","referencedSymbol","getAttributeNS","substr","push","queueRequest","callback","fileName","fragmentId","processRequestQueue","url","index","setTimeout","loadSvg","urlArr","XMLHttpRequest","httpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","DOMParser","Function","xmlDoc","parser","parseFromString","responseText","e","getElementsByTagName","open","overrideMimeType","send","injectElement","evalScripts","pngFallback","fallbackUrl","imgUrl","imgUrlSplitByFId","test","perElementFallback","pop","imgId","imgTitle","classMerge","concat","imgStyle","imgData","filter","at","dataAttr","newClipPathName","clipPaths","querySelectorAll","g","clipPathsLen","id","usingClipPath","h","usingClipPathLen","newMaskName","masks","masksLen","usingMask","j","usingMaskLen","script","scriptType","scripts","scriptsToEval","k","scriptsLen","innerText","textContent","removeChild","l","scriptsToEvalLen","styleTags","styleTag","svgClassList","parentNode","replaceChild","SVGInjector","elements","options","done","removeStyleClass","forceFallbacks","eachCallback","each","elementsLoaded","module","exports","define","amd"],"mappings":"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"}