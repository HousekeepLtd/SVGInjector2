{"version":3,"file":"./svg-injector.min.js","sources":["./svg-injector.js"],"names":["window","document","SVGInjector","options","instanceCounter","this","init","svgCache","injections","requestQueue","ranScripts","config","env","SVG_NS","XLINK_NS","DEFAULT_SPRITE_CLASS_NAME","DEFAULT_SPRITE_CLASS_ID_NAME","DEFAULT_FALLBACK_CLASS_NAMES","DEFAULT_REMOVESTYLES_CLASS_NAME","prototype","isLocal","location","protocol","hasSvgSupport","implementation","hasFeature","count","elements","evalScripts","pngFallback","onlyInjectVisiblePart","keepStylesClass","spriteClassName","spriteClassIdName","removeStylesClass","removeAllStyles","fallbackClassName","prefixStyleTags","spritesheetURL","prefixFragIdClass","forceFallbacks","replaceNoSVGClass","querySelector","writeDefaultClass","inject","onDoneCallback","eachCallback","undefined","length","elementsLoaded","ctx","forEach","call","element","injectElement","svg","el","onElementInjectedCallback","imgUrl","spriteId","getAttribute","getSpriteIdFromClass","setAttribute","imgUrlSplitByFId","split","push","fallbackUrl","test","perElementFallback","pop","replace","isArray","setFallbackClassNames","isFunction","svgElemSetClassName","removeFallbackClassNames","indexOf","loadSvg","getEnv","symbolId","classNames","className","slice","curClassName","idx","fallbackClassNames","idxOfCurClass","curClassNames","classAttribute","curFallbackClassName","uniqueClasses","join","prefixIdReferences","suffix","newName","definitions","defLen","defIdx","refrences","refLen","refIdx","attrs","attrLen","attrIdx","allLinks","allLinksLen","allLinksIdx","links","linkLen","linkIdx","defs","def","elem","querySelectorAll","id","getAttributeNS","toString","setAttributeNS","copyAttributes","svgElemSource","svgElemTarget","attributesToIgnore","curAttr","i","attributes","item","name","value","cloneSymbolAsSVG","svgSymbol","createElementNS","childNodes","child","appendChild","cloneNode","doPrefixStyleTags","styleTag","injectCount","regex","origPrefixClassName","newPrefixClassName","srcFileNameArr","regexSearchResult","selectorArr","srcArr","styleTagContent","textContent","newContent","prefixSelector","arr","RegExp","exec","trim","tmp","getClassList","svgToCheck","curClassAttr","classes","curClass","cloneSvg","sourceSvg","fragId","svgElem","newSVG","viewBox","viewBoxAttr","symbolAttributesToFind","curClassList","setViewboxOnNewSVG","symbolElem","getElementById","SVGSymbolElement","SVGViewElement","selector","Math","abs","parseInt","x","y","symobolList","SVGSVGElement","prop","removeAttribute","SVGUseElement","referencedSymbol","substr","fragIdClassName","queueRequest","fileName","callback","fragmentId","processRequestQueue","url","requestQueueElem","len","index","setTimeout","onLoadSVG","urlArr","XMLHttpRequest","httpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","DOMParser","Function","xmlDoc","parser","parseFromString","responseText","e","getElementsByTagName","open","overrideMimeType","send","css","head","style","createElement","type","styleSheet","cssText","createTextNode","noSVGClassName","imgId","imgTitle","classMerge","concat","imgStyle","imgData","filter","at","dataAttr","presARAttr","script","scriptType","scripts","scriptsToEval","k","scriptsLen","innerText","removeChild","l","scriptsToEvalLen","styleTags","svgClassList","parentNode","replaceChild","list","hash","out","hasOwnProperty","unshift","obj","constructor","apply","Object","newClassNames","curClasses","Array","fn","scope","TypeError","angular","module","provider","injectorOpts","set","opts","$get","factory","svgInjectorOptions","directive","svgInjectorFactory","restrict","link","$observe","exports","define","amd"],"mappings":"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"}