{"version":3,"file":"./svg-injector.min.js","sources":["./svg-injector.js"],"names":["window","document","uniqueClasses","list","split","hash","i","length","out","hasOwnProperty","unshift","join","isFunction","obj","constructor","call","apply","isArray","Object","prototype","toString","svgElemSetClassName","el","newClassNames","curClasses","getAttribute","setAttribute","setFallbackClassNames","element","symbolId","classNames","className","defaultFallbackClassNames","slice","forEach","curClassName","idx","replace","removeFallbackClassNames","fallbackClassNames","curClassNames","indexOf","onlyInjectVisiblePart","removeStylesClass","fallbackClassName","svgNS","xlinkNS","defaultRemoveStylesClassName","isLocal","location","protocol","hasSvgSupport","implementation","hasFeature","Array","fn","scope","this","TypeError","len","svgCache","injectCount","injectedElements","requestQueue","ranScripts","copyAttributes","svgElemSource","svgElemTarget","attributesToIgnore","curAttr","attributes","item","name","value","cloneSymbolAsSVG","svgSymbol","svg","createElementNS","childNodes","child","appendChild","cloneNode","getClassList","svgToCheck","curClassAttr","cloneSvg","sourceSvg","fragId","svgElem","newSVG","viewBox","viewBoxAttr","symbolAttributesToFind","curClassList","setViewboxOnNewSVG","symbolElem","undefined","getElementById","SVGSymbolElement","SVGViewElement","selector","Math","abs","x","y","querySelector","SVGSVGElement","prop","removeAttribute","SVGUseElement","referencedSymbol","getAttributeNS","substr","push","queueRequest","callback","fileName","fragmentId","processRequestQueue","url","index","setTimeout","loadSvg","urlArr","XMLHttpRequest","httpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","DOMParser","Function","xmlDoc","parser","parseFromString","responseText","e","getElementsByTagName","open","overrideMimeType","send","injectElement","evalScripts","pngFallback","fallbackUrl","imgUrl","imgUrlSplitByFId","test","perElementFallback","pop","imgId","imgTitle","classMerge","concat","imgStyle","imgData","filter","at","dataAttr","newClipPathName","clipPaths","querySelectorAll","g","clipPathsLen","id","usingClipPath","h","usingClipPathLen","newMaskName","masks","masksLen","usingMask","j","usingMaskLen","script","scriptType","scripts","scriptsToEval","k","scriptsLen","innerText","textContent","removeChild","l","scriptsToEvalLen","styleTags","styleTag","svgClassList","parentNode","replaceChild","SVGInjector","elements","options","done","forceFallbacks","eachCallback","each","htmlElement","css","head","style","createElement","type","styleSheet","cssText","createTextNode","elementsLoaded","module","exports","define","amd"],"mappings":"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"}