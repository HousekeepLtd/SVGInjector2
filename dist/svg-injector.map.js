{"version":3,"file":"./svg-injector.min.js","sources":["./svg-injector.js"],"names":["window","document","uniqueClasses","list","split","hash","i","length","out","hasOwnProperty","unshift","join","isFunction","obj","constructor","call","apply","isArray","Object","prototype","toString","svgElemSetClassName","el","newClassNames","curClasses","getAttribute","setAttribute","setFallbackClassNames","element","symbolId","classNames","className","defaultFallbackClassNames","slice","forEach","curClassName","idx","replace","removeFallbackClassNames","fallbackClassNames","curClassNames","indexOf","onlyInjectVisiblePart","removeStylesClass","keepStylesClass","fallbackClassName","prefixStyleTags","removeAllStyles","svgNS","xlinkNS","defaultRemoveStylesClassName","isLocal","location","protocol","hasSvgSupport","implementation","hasFeature","Array","fn","scope","this","TypeError","len","svgCache","injectCount","injectedElements","requestQueue","ranScripts","copyAttributes","svgElemSource","svgElemTarget","attributesToIgnore","curAttr","attributes","item","name","value","cloneSymbolAsSVG","svgSymbol","svg","createElementNS","childNodes","child","appendChild","cloneNode","doPrefixStyleTags","styleTag","srcArr","origPrefixClassName","regex","RegExp","newPrefixClassName","textContent","getClassList","svgToCheck","curClassAttr","cloneSvg","sourceSvg","fragId","svgElem","newSVG","viewBox","viewBoxAttr","symbolAttributesToFind","curClassList","setViewboxOnNewSVG","symbolElem","undefined","getElementById","SVGSymbolElement","SVGViewElement","selector","Math","abs","x","y","querySelector","SVGSVGElement","prop","removeAttribute","SVGUseElement","referencedSymbol","getAttributeNS","substr","push","queueRequest","callback","fileName","fragmentId","processRequestQueue","url","index","setTimeout","loadSvg","urlArr","XMLHttpRequest","httpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","DOMParser","Function","xmlDoc","parser","parseFromString","responseText","e","getElementsByTagName","open","overrideMimeType","send","injectElement","evalScripts","pngFallback","fallbackUrl","imgUrl","imgUrlSplitByFId","test","perElementFallback","pop","imgId","imgTitle","classMerge","concat","imgStyle","imgData","filter","at","dataAttr","presARAttr","newClipPathName","clipPaths","querySelectorAll","g","clipPathsLen","id","usingClipPath","h","usingClipPathLen","newMaskName","masks","masksLen","usingMask","j","usingMaskLen","script","scriptType","scripts","scriptsToEval","k","scriptsLen","innerText","removeChild","l","scriptsToEvalLen","styleTags","svgClassList","parentNode","replaceChild","SVGInjector","elements","options","done","forceFallbacks","eachCallback","each","htmlElement","css","head","style","createElement","type","styleSheet","cssText","createTextNode","elementsLoaded","module","exports","define","amd"],"mappings":"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"}