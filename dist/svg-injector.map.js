{"version":3,"file":"./svg-injector.min.js","sources":["./svg-injector.js"],"names":["window","document","uniqueClasses","list","split","hash","i","length","out","hasOwnProperty","unshift","join","isFunction","obj","constructor","call","apply","onlyInjectVisiblePart","removeStylesClass","fallbackClassName","svgNS","xlinkNS","isLocal","location","protocol","hasSvgSupport","implementation","hasFeature","forEach","Array","prototype","fn","scope","this","TypeError","len","svgCache","injectCount","injectedElements","requestQueue","ranScripts","copyAttributes","svgElemSource","svgElemTarget","attributesToIgnore","curAttr","attributes","item","indexOf","name","setAttribute","value","cloneSymbolAsSVG","svgSymbol","svg","createElementNS","childNodes","child","appendChild","cloneNode","getClassList","svgToCheck","curClassAttr","getAttribute","cloneSvg","sourceSvg","fragId","svgElem","newSVG","viewBox","viewBoxAttr","symbolAttributesToFind","curClassList","setViewboxOnNewSVG","symbolElem","undefined","getElementById","SVGSymbolElement","SVGViewElement","selector","Math","abs","x","y","querySelector","SVGSVGElement","prop","removeAttribute","SVGUseElement","referencedSymbol","getAttributeNS","substr","push","queueRequest","callback","fileName","fragmentId","processRequestQueue","url","index","setTimeout","loadSvg","urlArr","XMLHttpRequest","httpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","DOMParser","Function","xmlDoc","parser","parseFromString","responseText","e","getElementsByTagName","open","overrideMimeType","send","injectElement","el","evalScripts","pngFallback","fallbackUrl","imgUrl","imgUrlSplitByFId","test","perElementFallback","pop","replace","className","imgId","imgTitle","classMerge","concat","imgStyle","imgData","filter","at","dataAttr","newClipPathName","clipPaths","querySelectorAll","g","clipPathsLen","id","usingClipPath","h","usingClipPathLen","newMaskName","masks","masksLen","usingMask","j","usingMaskLen","script","scriptType","scripts","scriptsToEval","k","scriptsLen","innerText","textContent","removeChild","l","scriptsToEvalLen","styleTags","styleTag","svgClassList","parentNode","replaceChild","SVGInjector","elements","options","done","removeStyleClass","element","symbolId","curClasses","forceFallbacks","eachCallback","each","elementsLoaded","module","exports","define","amd"],"mappings":"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"}